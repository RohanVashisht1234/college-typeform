<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Share Form - Typeform</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #10b981;
      --primary-dark: #059669;
      --accent: #3b82f6;
      --surface: #fff;
      --gray: #f8f9fa;
      --text: #222;
      --border: #e5e7eb;
      --surface-dark: #191c1e;
      --surface-dark2: #202427;
      --gray-dark: #181b1e;
      --border-dark: #32363a;
      --text-dark: #f3f4f6;
      --text-dark2: #b5bec9;
      --accent-dark: #06b6d4;
    }

    html,
    body {
      height: 100%;
      min-height: 100vh;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: var(--gray);
      color: var(--text);
      line-height: 1.5;
      height: 100vh;
      display: flex;
      flex-direction: column;
      transition: background .2s, color .2s;
    }

    body.dark,
    .dark body {
      background: var(--gray-dark) !important;
      color: var(--text-dark2);
    }

    .dark,
    .dark * {
      --text: var(--text-dark2);
      color: var(--text-dark2) !important;
    }

    .top-nav {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: background .2s, border .2s;
    }

    .dark .top-nav {
      background: var(--surface-dark);
      border-color: var(--border-dark);
    }

    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #6b7280;
    }

    .breadcrumb-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .breadcrumb-item span {
      cursor: pointer;
    }

    .nav-tabs {
      display: flex;
      gap: 24px;
      margin: 0 auto;
    }

    .nav-tab {
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .nav-tab.active {
      color: #111827;
      border-bottom-color: var(--primary);
    }

    .nav-tab:hover {
      color: #374151;
    }

    .dark .nav-tab {
      color: var(--text-dark2);
    }

    .dark .nav-tab.active {
      color: #fff;
      border-bottom-color: var(--primary);
    }

    .dark .nav-tab:hover {
      color: #fff;
    }

    .top-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .btn {
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      border: 1px solid #d1d5db;
      background: var(--surface);
      color: #374151;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .btn:hover {
      border-color: #9ca3af;
    }

    .btn-primary {
      background: var(--primary);
      color: white !important;
      border-color: var(--primary);
    }

    .btn-primary:hover {
      background: var(--primary-dark);
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
    }

    .dark .top-actions .btn,
    .dark .btn {
      background: var(--surface-dark2);
      color: var(--text-dark2) !important;
      border-color: var(--border-dark);
    }

    .dark .btn-primary {
      background: var(--primary);
      color: #fff !important;
      border-color: var(--primary);
    }

    .dark .btn-primary:hover {
      background: var(--primary-dark);
    }

    .main-layout {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    .left-sidebar {
      width: 280px;
      background: var(--surface);
      border-right: 1px solid var(--border);
      overflow-y: auto;
      padding: 24px;
    }

    .dark .left-sidebar {
      background: var(--surface-dark2);
      border-color: var(--border-dark);
    }

    .share-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 8px;
      transition: all 0.2s;
      border: 1px solid transparent;
    }

    .share-option:hover {
      background: #f9fafb;
    }

    .share-option.active {
      background: #f0fdf4;
      border-color: var(--primary);
    }

    .share-icon {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6b7280;
      font-size: 14px;
    }

    .share-option.active .share-icon {
      background: var(--primary);
      color: white;
    }

    .share-text {
      font-size: 14px;
      color: #374151;
      font-weight: 500;
    }

    .dark .share-option {
      color: var(--text-dark2);
    }

    .dark .share-option.active {
      background: #093;
      border-color: var(--primary);
    }

    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
      background: var(--gray);
    }

    .dark .main-content {
      background: var(--gray-dark);
    }

    .share-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
      background: var(--surface);
      padding: 16px 20px;
      border-radius: 8px;
      border: 1px solid var(--border);
    }

    .dark .share-header {
      background: var(--surface-dark2);
      border-color: var(--border-dark);
    }

    .copy-link-btn {
      background: #374151;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .copy-link-btn:hover {
      background: #1f2937;
    }

    .form-url {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
      background: #f9fafb;
      color: #6b7280;
    }

    .dark .form-url {
      background: #23272b;
      color: var(--text-dark2);
      border-color: var(--border-dark);
    }

    .customize-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .action-btn {
      background: none;
      border: 1px solid #d1d5db;
      color: #6b7280;
      cursor: pointer;
      font-size: 16px;
      padding: 8px;
      border-radius: 6px;
      transition: all 0.2s;
    }

    .action-btn:hover {
      background: #f3f4f6;
      color: #374151;
    }

    .dark .action-btn {
      color: var(--text-dark2);
    }

    .form-preview {
      background: var(--surface);
      border-radius: 12px;
      padding: 0;
      text-align: center;
      border: 1px solid var(--border);
      margin-bottom: 24px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 650px;
    }

    .dark .form-preview {
      background: var(--surface-dark2);
      border-color: var(--border-dark);
    }

    .form-iframe-wrap {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      transition: all .3s cubic-bezier(.4, 1.2, .6, 1);
    }

    .form-iframe {
      width: 100%;
      border: none;
      min-height: 650px;
      background: #f8fafc;
      border-radius: 12px;
      transition: width .3s cubic-bezier(.4, 1.2, .6, 1), min-width .3s cubic-bezier(.4, 1.2, .6, 1), min-height .3s cubic-bezier(.4, 1.2, .6, 1);
      box-shadow: 0 2px 24px #0001;
      max-width: 900px;
    }

    .dark .form-iframe {
      background: #23272b;
    }

    .form-iframe.mobile {
      width: 375px !important;
      min-width: 375px !important;
      max-width: 375px !important;
      min-height: 700px !important;
      height: 700px !important;
      border-radius: 25px;
      box-shadow: 0 6px 32px #0002, 0 1.5px 4px #0001;
      border: 2px solid #282c34;
      margin: 20px auto;
      background: #181b1e;
      transition: width .3s cubic-bezier(.4, 1.2, .6, 1), min-width .3s cubic-bezier(.4, 1.2, .6, 1), min-height .3s cubic-bezier(.4, 1.2, .6, 1);
    }

    .dark .form-iframe.mobile {
      border-color: #222;
      background: #181b1e;
    }

    @media (max-width: 500px) {

      .form-iframe,
      .form-iframe.mobile {
        width: 99vw !important;
        min-width: 99vw !important;
        max-width: 99vw !important;
        min-height: 400px !important;
        height: 450px !important;
        border-radius: 8px;
      }
    }

    .form-branding {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: #6b7280;
      font-size: 14px;
    }

    .typeform-logo {
      background: #3b82f6;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-weight: 600;
      font-size: 12px;
    }

    .right-sidebar {
      width: 320px;
      background: var(--surface);
      border-left: 1px solid var(--border);
      overflow-y: auto;
      padding: 24px;
    }

    .dark .right-sidebar {
      background: var(--surface-dark2);
      border-color: var(--border-dark);
    }

    .sidebar-section {
      margin-bottom: 32px;
    }

    .sidebar-section-title {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 16px;
    }

    .dark .sidebar-section-title {
      color: #f3f4f6;
    }

    .social-buttons {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .social-btn {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 16px;
    }

    .social-btn:hover {
      background: #f3f4f6;
    }

    .social-btn.facebook {
      color: #1877f2;
    }

    .social-btn.linkedin {
      color: #0a66c2;
    }

    .social-btn.twitter {
      color: #1da1f2;
    }

    .social-btn.buffer {
      color: #168eea;
    }

    .social-btn.more {
      color: #6b7280;
    }

    .link-settings {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid #f3f4f6;
    }

    .link-settings:last-child {
      border-bottom: none;
    }

    .setting-label {
      font-size: 14px;
      color: #374151;
    }

    .setting-icon {
      color: #6b7280;
      cursor: pointer;
    }

    .preview-section {
      margin-bottom: 24px;
    }

    .preview-thumbnail {
      width: 100%;
      height: 120px;
      background: #1f2937;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 16px;
    }

    .thumbnail-actions {
      display: flex;
      gap: 8px;
    }

    .thumbnail-btn {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      background: white;
      color: #6b7280;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .thumbnail-btn:hover {
      background: #f3f4f6;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 6px;
    }

    .form-input {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .form-textarea {
      width: 100%;
      min-height: 80px;
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
      resize: vertical;
    }

    .form-textarea:focus {
      outline: none;
      border-color: var(--primary);
    }

    .toggle-switch {
      position: relative;
      width: 44px;
      height: 24px;
      background: #d1d5db;
      border-radius: 12px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .toggle-switch.active {
      background: var(--primary);
    }

    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: transform 0.2s;
    }

    .toggle-switch.active::after {
      transform: translateX(20px);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--surface);
      border-radius: 12px;
      padding: 24px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .dark .modal-content {
      background: var(--surface-dark2);
      color: #fff;
    }

    @media (max-width: 1200px) {
      .right-sidebar {
        width: 280px;
      }
    }

    @media (max-width: 992px) {
      .main-layout {
        flex-direction: column;
      }

      .left-sidebar,
      .right-sidebar {
        width: 100%;
        border: none;
        border-bottom: 1px solid #e5e7eb;
      }

      .main-content {
        padding: 16px;
      }
    }

    @media (max-width: 768px) {
      .top-nav {
        flex-direction: column;
        gap: 12px;
        align-items: flex-start;
      }

      .nav-tabs {
        order: 2;
        margin: 0;
      }

      .main-layout {
        flex-direction: column;
      }

      .left-sidebar,
      .right-sidebar {
        width: 100%;
        border: none;
        border-bottom: 1px solid #e5e7eb;
      }

      .main-content {
        padding: 12px;
      }

      .form-preview {
        min-height: 350px;
      }

      .form-iframe,
      .form-iframe.mobile {
        width: 99vw !important;
        min-width: 99vw !important;
        max-width: 99vw !important;
        min-height: 400px !important;
        height: 450px !important;
        border-radius: 8px;
      }
    }

    ::-webkit-scrollbar {
      width: 8px;
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #e5e7eb;
      border-radius: 4px;
    }

    .dark ::-webkit-scrollbar-thumb {
      background: #333;
    }
  </style>
</head>

<body>
  <!-- Top Navigation -->
  <nav class="top-nav">
    <div class="breadcrumb">
      <div class="breadcrumb-item" onclick="gotoWorkspace()" style="cursor:pointer;">
        <i class="fas fa-th"></i><span>My workspace</span><i class="fas fa-chevron-right"></i>
      </div>
      <div class="breadcrumb-item"><span id="breadcrumbFormName"></span></div>
    </div>
    <div class="nav-tabs">
      <div class="nav-tab" onclick="gotoContent()">Content</div>
      <div class="nav-tab" onclick="gotoWorkflow()">Workflow</div>
      <div class="nav-tab" onclick="gotoConnect()">Connect</div>
      <div class="nav-tab active">Share</div>
      <div class="nav-tab" onclick="gotoResults()">Results</div>
    </div>
    <div class="top-actions">
      <button class="btn" id="linkBtn"><i class="fas fa-link"></i></button>
      <button class="btn btn-primary" id="plansBtn">View plans</button>
      <button class="btn" id="helpBtn"><i class="fas fa-question-circle"></i></button>
      <div class="user-avatar">RV</div>
      <button class="btn" id="darkToggleBtn" title="Toggle dark mode" style="margin-left:8px;"><i
          class="fas fa-moon"></i></button>
    </div>
  </nav>
  <div class="main-layout">
    <!-- Left Sidebar -->
    <aside class="left-sidebar">
      <div class="share-option active" data-option="link" onclick="mockSidebar('link')">
        <div class="share-icon"><i class="fas fa-link"></i></div>
        <div class="share-text">Share the link</div>
      </div>
      <div class="share-option" data-option="email" onclick="mockSidebar('email')">
        <div class="share-icon"><i class="fas fa-envelope"></i></div>
        <div class="share-text">Embed in an email</div>
      </div>
      <div class="share-option" data-option="webpage" onclick="mockSidebar('webpage')">
        <div class="share-icon"><i class="fas fa-code"></i></div>
        <div class="share-text">Embed in a web page</div>
      </div>
      <div class="share-option" data-option="targeted" onclick="mockSidebar('targeted')">
        <div class="share-icon"><i class="fas fa-users"></i></div>
        <div class="share-text">Get targeted respondents</div>
      </div>
      <div style="margin-top:30px;">
        <button class="btn btn-primary" style="width:100%;" onclick="window.location='/pricing.html'"><i
            class="fas fa-crown"></i> Upgrade plan</button>
        <div style="font-size:12px;color:#6b7280;margin-top:10px;">Try Business or Enterprise for more sharing options.
        </div>
      </div>
      <div id="mockSidebarInfo" style="margin-top:25px;font-size:13px;color:#6b7280;"></div>
    </aside>
    <!-- Main Content -->
    <main class="main-content">
      <!-- Share Header -->
      <div class="share-header">
        <button class="copy-link-btn" onclick="copyLink()"><i class="fas fa-link"></i> Copy link </button>
        <input type="text" class="form-url" value="" readonly id="formUrl">
        <div class="customize-actions">
          <button class="action-btn" title="Customize" id="editBtn"><i class="fas fa-edit"></i></button>
          <button class="action-btn" title="Email"><i class="fas fa-envelope"></i></button>
          <button class="action-btn" title="QR Code"><i class="fas fa-qrcode"></i></button>
          <button class="action-btn" title="Mobile" id="mobileBtn"><i class="fas fa-mobile-alt"></i></button>
        </div>
      </div>
      <div class="form-preview" id="formPreviewBox" style="padding:0;">
        <div class="form-iframe-wrap" id="iframeWrap">
          <iframe class="form-iframe" id="formIframe" src="" allowfullscreen></iframe>
        </div>
      </div>
    </main>
    <!-- Right Sidebar -->
    <aside class="right-sidebar">
      <div class="sidebar-section">
        <div class="sidebar-section-title">Share in:</div>
        <div class="social-buttons">
          <button class="social-btn facebook" onclick="shareToSocial('facebook')"><i
              class="fab fa-facebook-f"></i></button>
          <button class="social-btn linkedin" onclick="shareToSocial('linkedin')"><i
              class="fab fa-linkedin-in"></i></button>
          <button class="social-btn twitter" onclick="shareToSocial('twitter')"><i class="fab fa-twitter"></i></button>
          <button class="social-btn buffer" onclick="shareToSocial('buffer')"><i class="fas fa-share-alt"></i></button>
          <button class="social-btn more" onclick="shareToSocial('more')"><i class="fas fa-ellipsis-h"></i></button>
        </div>
      </div>
      <div class="sidebar-section">
        <div class="link-settings"><span class="setting-label">Link settings</span><i
            class="fas fa-chevron-right setting-icon"></i></div>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-section-title">Preview</div>
        <div class="preview-thumbnail"> Typeform </div>
        <div class="thumbnail-actions">
          <button class="thumbnail-btn">Upload</button>
          <button class="thumbnail-btn"><i class="fas fa-palette"></i> Design with Canva </button>
        </div>
      </div>
      <div class="sidebar-section">
        <div class="form-group"><label class="form-label" for="formTitle">Title</label><input type="text"
            class="form-input" id="formTitle" value=""></div>
        <div class="form-group"><label class="form-label" for="formDescription">Description</label><textarea
            class="form-textarea" id="formDescription"
            placeholder="Turn data collection into an experience with Typeform. Create beautiful online forms, surveys, quizzes, and so much more. Try it for FREE."></textarea>
        </div>
        <div class="link-settings"><span class="setting-label">Show in search results</span>
          <div class="toggle-switch" onclick="toggleSwitch(this)"></div>
        </div>
      </div>
    </aside>
  </div>
  <!-- Embed Code Modal -->
  <div class="modal" id="embedModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Embed Code</h2><button class="modal-close" onclick="closeModal()"><i
            class="fas fa-times"></i></button>
      </div>
      <div class="embed-code" id="embedCode"></div>
      <div style="display: flex; gap: 12px; justify-content: flex-end;"><button class="btn"
          onclick="closeModal()">Close</button><button class="btn btn-primary" onclick="copyEmbedCode()">Copy
          Code</button></div>
    </div>
  </div>
  <!-- QR Code Modal -->
  <div class="modal" id="qrModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">QR Code</h2><button class="modal-close" onclick="closeModal()"><i
            class="fas fa-times"></i></button>
      </div>
      <div style="text-align: center; padding: 20px;">
        <div
          style="width: 200px; height: 200px; background: #f3f4f6; border: 1px solid #e5e7eb; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
          <i class="fas fa-qrcode" style="font-size: 48px; color: #6b7280;"></i></div>
        <p style="color: #6b7280; font-size: 14px; margin-bottom: 20px;">Scan this QR code to access your form</p>
        <div style="display: flex; gap: 12px; justify-content: center;"><button class="btn">Download PNG</button><button
            class="btn">Download SVG</button></div>
      </div>
    </div>
    <script>
      let currentShareOption = 'link';
      let selectedRating = null;
      let mobileMode = false;
      function getFormName() {
        const url = new URL(window.location.href);
        return url.searchParams.get('q') || 'Untitled Form';
      }
      function getShareUrl() {
        const formName = getFormName();
        return window.location.origin + "/logged_in/export.html?q=" + encodeURIComponent(formName);
      }
      function getExportUrl() {
        const formName = getFormName();
        return "/logged_in/export.html?q=" + encodeURIComponent(formName);
      }
      function getSharePageUrl() {
        const formName = getFormName();
        return window.location.origin + "/logged_in/share.html?q=" + encodeURIComponent(formName);
      }
      function init() {
        document.getElementById("breadcrumbFormName").textContent = getFormName();
        document.getElementById("formUrl").value = getShareUrl();
        document.getElementById("formIframe").src = getExportUrl();
        try {
          const forms = JSON.parse(localStorage.getItem('forms') || '[]');
          const form = forms.find(f => (f.name || f.title) === getFormName());
          if (form) {
            document.getElementById('formTitle').value = form.name || form.title || '';
            document.getElementById('formDescription').value = form.description || '';
          }
        } catch { }
        setupEventListeners();
        setDarkInitial();
      }
      function setupEventListeners() {
        document.getElementById('plansBtn').onclick = () => window.location = '/pricing.html';
        document.getElementById('linkBtn').onclick = copyFormLink;
        document.getElementById('helpBtn').onclick = () => window.location = '/help.html';
        document.getElementById('darkToggleBtn').onclick = toggleDarkMode;
        document.querySelectorAll('.nav-tab')[0].onclick = gotoContent;
        document.querySelectorAll('.nav-tab')[1].onclick = gotoWorkflow;
        document.querySelectorAll('.nav-tab')[2].onclick = gotoConnect;
        document.querySelectorAll('.nav-tab')[3].onclick = () => { };
        document.querySelectorAll('.nav-tab')[4].onclick = gotoResults;
        document.getElementById('mobileBtn').onclick = mobileViewClick;
        document.getElementById('editBtn').onclick = gotoContent;
        document.querySelectorAll('.share-option').forEach(option => {
          option.addEventListener('click', function () {
            document.querySelectorAll('.share-option').forEach(o => o.classList.remove('active'));
            this.classList.add('active');
            mockSidebar(this.dataset.option);
          });
        });
        document.querySelector('.breadcrumb-item').onclick = gotoWorkspace;
        document.querySelectorAll('.action-btn[title="Email"]').forEach(btn => { btn.addEventListener('click', () => openEmailModal()); });
        document.querySelectorAll('.action-btn[title="QR Code"]').forEach(btn => { btn.addEventListener('click', () => openQRModal()); });
        document.getElementById('formTitle').addEventListener('input', updateFormTitle);
        document.getElementById('formDescription').addEventListener('input', updateFormDescription);
        document.querySelectorAll('.modal').forEach(modal => { modal.addEventListener('click', function (e) { if (e.target === this) { closeModal(); } }); });
      }
      function gotoWorkspace() { window.location = "/logged_in/index.html"; }
      function gotoContent() { window.location.href = "/logged_in/content.html?q=" + encodeURIComponent(getFormName()); }
      function gotoWorkflow() { window.location.href = "/logged_in/workflow.html?q=" + encodeURIComponent(getFormName()); }
      function gotoConnect() { window.location.href = "/logged_in/connect.html?q=" + encodeURIComponent(getFormName()); }
      function gotoResults() { window.location.href = "/logged_in/results.html?q=" + encodeURIComponent(getFormName()); }
      function copyFormLink() {
        const url = getShareUrl();
        if (navigator.clipboard) {
          navigator.clipboard.writeText(url).then(() => {
            showNotification('Form link copied!', 'success');
          });
        } else {
          const tmp = document.createElement('input');
          tmp.value = url;
          document.body.appendChild(tmp);
          tmp.select();
          document.execCommand('copy');
          tmp.remove();
          showNotification('Form link copied!', 'success');
        }
      }
      function copyLink() { copyFormLink(); }
      function showEmbedCode(type) {
        let embedCode = '';
        if (type === 'email') {
          embedCode = `<a href="${getShareUrl()}">Take our survey</a>`;
        } else {
          embedCode = `<iframe src="${getExportUrl()}" width="100%" height="600" frameborder="0"></iframe>`;
        }
        document.getElementById('embedCode').textContent = embedCode;
        document.getElementById('embedModal').classList.add('active');
      }
      function copyEmbedCode() {
        const embedCode = document.getElementById('embedCode').textContent;
        if (navigator.clipboard) {
          navigator.clipboard.writeText(embedCode).then(() => {
            showNotification('Embed code copied to clipboard!', 'success');
            closeModal();
          });
        } else {
          const tmp = document.createElement('input');
          tmp.value = embedCode;
          document.body.appendChild(tmp);
          tmp.select();
          document.execCommand('copy');
          tmp.remove();
          showNotification('Embed code copied to clipboard!', 'success');
        }
      }
      function openEmailModal() { showEmbedCode('email'); }
      function openQRModal() { document.getElementById('qrModal').classList.add('active'); }
      function closeModal() { document.querySelectorAll('.modal').forEach(modal => { modal.classList.remove('active'); }); }
      function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        const colors = { success: '#10b981', warning: '#f59e0b', error: '#ef4444', info: '#3b82f6' };
        notification.style.cssText = ` position: fixed; top: 20px; right: 20px; background: ${colors[type]}; color: white; padding: 12px 20px; border-radius: 8px; font-size: 14px; font-weight: 500; z-index: 2000; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); transform: translateX(100%); transition: transform 0.3s ease; max-width: 300px; `;
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => { notification.style.transform = 'translateX(0)'; }, 100);
        setTimeout(() => { notification.style.transform = 'translateX(100%)'; setTimeout(() => { if (document.body.contains(notification)) { document.body.removeChild(notification); } }, 300); }, 3000);
      }
      function shareToSocial(platform) {
        const url = encodeURIComponent(getShareUrl());
        const title = encodeURIComponent(document.getElementById('formTitle').value || 'My new form');
        let shareUrl = '';
        switch (platform) {
          case 'facebook': shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`; break;
          case 'twitter': shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`; break;
          case 'linkedin': shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`; break;
          case 'buffer': shareUrl = `https://buffer.com/add?url=${url}&text=${title}`; break;
          default: showNotification('More sharing options coming soon!', 'info'); return;
        }
        if (shareUrl) window.open(shareUrl, '_blank', 'width=600,height=400');
      }
      function toggleSwitch(element) { element.classList.toggle('active'); }
      function updateFormTitle() { }
      function updateFormDescription() { }
      function mockSidebar(option) {
        let msg = '';
        if (option === 'link') msg = "Copy and share your public link or embed the form anywhere.";
        if (option === 'email') msg = "You can embed your form in an email to collect responses directly from inboxes. (Demo only)";
        if (option === 'webpage') msg = "Embed your form in any webpage using the provided HTML iframe code. (Demo only)";
        if (option === 'targeted') msg = "Targeted respondents lets you reach the right audience for your form. (Demo only)";
        document.getElementById('mockSidebarInfo').textContent = msg;
      }
      function setDarkInitial() {
        let dark = false;
        if (localStorage.getItem('share-darkmode') === '1') dark = true;
        else if (localStorage.getItem('share-darkmode') === '0') dark = false;
        else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) dark = true;
        if (dark) {
          document.body.classList.add('dark');
          document.getElementById('darkToggleBtn').innerHTML = '<i class="fas fa-sun"></i>';
        } else {
          document.body.classList.remove('dark');
          document.getElementById('darkToggleBtn').innerHTML = '<i class="fas fa-moon"></i>';
        }
      }
      function toggleDarkMode() {
        document.body.classList.toggle('dark');
        if (document.body.classList.contains('dark')) {
          localStorage.setItem('share-darkmode', '1');
          document.getElementById('darkToggleBtn').innerHTML = '<i class="fas fa-sun"></i>';
        } else {
          localStorage.setItem('share-darkmode', '0');
          document.getElementById('darkToggleBtn').innerHTML = '<i class="fas fa-moon"></i>';
        }
      }
      function mobileViewClick() {
        const iframe = document.getElementById('formIframe');
        const wrap = document.getElementById('iframeWrap');
        mobileMode = !mobileMode;
        if (mobileMode) {
          iframe.classList.add('mobile');
          showNotification('Mobile preview enabled', 'info');
        } else {
          iframe.classList.remove('mobile');
          showNotification('Desktop preview enabled', 'info');
        }
      }
      document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>